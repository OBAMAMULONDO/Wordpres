<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Victor's WordPress</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="Wordpress">
        <div class="logo">Victor's WordPress</div>
        <i class="fa-solid fa-bars menu-toggle"></i>
        <div class="nav-links">
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#news-container">Latest News</a></li>
                <li><a href="#sports-container">Sports</a></li>
                <li><a href="#politics-container">Politics</a></li>
                <li><a href="#advertise-container">Advertise</a></li>
                <li><a href="#contact-us">Contact us</a></li>
            </ul>
        </div>
    </div>

    <!-- Body-section -->
    <u><h1>The New Times</h1></u>

    <div class="card">
        <p>Get latest news ðŸ“° through Victor's WordPress, Worldly wide advertising NewsPaper, Sports news etc.</p>
    </div>

    <div class="home" id="home">
        <div class="home-bar">
            <ul>
                <li><a href="#news-container">News</a></li>
                <li><a href="#sports-container">Sports</a></li>
                <li><a href="#politics-container">Politics</a></li>
                <li><a href="#advertise">Advertise</a></li>
            </ul>
        </div>
    </div>

    <!-- Search Bar Section -->
    <div class="search-section">
        <form class="search-form" role="search" method="get" action="#">
            <input type="search" name="s" placeholder="Search here..." required>
            <button type="submit"><i class="fa fa-search"></i></button>
        </form>
    </div>

    <!-- Latest News Section -->
    <div id="latest-news">
        <h2>Latest News</h2>
        <div id="news-container"></div>
    </div>

    <!-- Sports News Section -->
    <div id="sports-news">
        <h2>Sports News</h2>
        <div id="sports-container"></div>
    </div>
    
    <!-- Politics News Section -->
    <div id="politics-news">
        <h2>Politics News</h2>
        <div id="politics-container"></div>
    </div>

    <script>
        // RSS Feed URLs for different categories (replace with actual RSS URLs)
        const rssUrls = {
            latestNews: 'https://rss.cnn.com/rss/edition_world.rss', // Example URL for World News
            sportsNews: 'https://rss.cnn.com/rss/edition_sport.rss', // Example URL for Sports News
            politicsNews: 'https://rss.cnn.com/rss/edition_politics.rss', // Example URL for Politics News
        };

        // Function to fetch and display the RSS feed
        async function fetchRSS(url, containerId) {
            try {
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`);
                const data = await response.json();
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear previous content

                if (data.items && data.items.length > 0) {
                    data.items.forEach(item => {
                        const article = document.createElement('div');
                        article.classList.add('news-item');
                        article.innerHTML = `
                            <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
                            <p>${item.description}</p>
                            <img src="${item.enclosure ? item.enclosure.link : ''}" alt="News Image" />
                            <p><small>Published: ${item.pubDate}</small></p>
                        `;
                        container.appendChild(article);
                    });
                } else {
                    container.innerHTML = '<p>No news available.</p>';
                }
            } catch (error) {
                console.error('Error fetching RSS feed:', error);
            }
        }

        // Ensure that the DOM is fully loaded before running the script
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch and display the news for each category
            fetchRSS(rssUrls.latestNews, 'news-container');
            fetchRSS(rssUrls.sportsNews, 'sports-container');
            fetchRSS(rssUrls.politicsNews, 'politics-container');
        });

        // MENU TOGGLE
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');

        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // SEARCH FEATURE - Update as you type
        const searchInput = document.querySelector('.search-form input[type="search"]');

        searchInput.addEventListener('input', function () {
            const query = searchInput.value.trim().toLowerCase();

            // Remove old results
            const oldResults = document.querySelector('.search-results');
            if (oldResults) oldResults.remove();

            // If the input field is empty, do not show results
            if (!query) return;

            // Create a new results box
            const resultsBox = document.createElement('div');
            resultsBox.className = 'search-results';
            resultsBox.style.display = 'block'; // Make visible

            // Get all content that should be searchable
            const searchableElements = document.querySelectorAll('.card, p, h1, h2, h3, li, .home-bar a, .fa-solid');
            const alreadyAdded = new Set(); // Track unique text content that has already been added
            let foundAny = false;

            searchableElements.forEach(el => {
                const text = el.textContent.trim().toLowerCase();

                // Ensure we don't include irrelevant content and prevent duplicates
                if (text && text.includes(query) && !el.closest('.nav-links') && !el.closest('.Wordpress') && !alreadyAdded.has(text)) {
                    foundAny = true;
                    const resultItem = document.createElement('p');
                    resultItem.textContent = el.textContent;
                    resultsBox.appendChild(resultItem);

                    // Add the text to the 'alreadyAdded' set to prevent duplicate entries
                    alreadyAdded.add(text);
                }
            });

            if (!foundAny) {
                const noMatch = document.createElement('p');
                noMatch.textContent = `No results found for "${query}".`;
                noMatch.style.color = '#ff4d4d';
                resultsBox.appendChild(noMatch);
            }

            document.querySelector('.search-section').appendChild(resultsBox);
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();

                document.querySelector(this.getAttribute("href")).scrollIntoView({
                    behavior: "smooth"
                });
            });
        });
    </script>

</body>

</html>
